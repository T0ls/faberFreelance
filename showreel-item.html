<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Showreel • dettaglio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inria+Serif:wght@400;700&display=swap" rel="stylesheet">
    <style>
      :root{ --text:#0b1220; --muted:#64748b; --accent:#6c8cff; --card:#ffffff }
      html,body{height:100%}
      body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial; background:#ffffff; color:var(--text)}
      header{background:transparent}
      .brand{color:var(--text); font-weight:600}

      .container-hero{max-width:1180px;margin:5px auto;padding:28px;background:transparent;border-radius:8px}

      .title{font-family:'Inria Serif', serif;font-size:2rem;margin:10px 0;color:var(--text)}
      .sub{color:var(--muted);margin-bottom:8px}

      .player-wrap{max-width:980px;margin:18px auto;border-radius:12px;overflow:hidden;background:#000}
      .player-wrap video, .player-wrap img{width:100%;height:480px;object-fit:cover;display:block}

      .description{max-width:980px;margin:18px auto;color:#334155}

      .info-box{max-width:980px;margin:18px auto;padding:14px;border-radius:10px;background:#f8fafc;border:1px solid #eef2f7;color:var(--muted)}
      .info-row{display:flex;justify-content:space-between;padding:.35rem 0;border-bottom:1px dashed #eef2f7}

      @font-face{
        font-family: "Obra Letra";
        src: local("Obra Letra")
             /* , url("/fonts/ObraLetra.woff2") format("woff2"),
                url("/fonts/ObraLetra.woff") format("woff") */;
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      /* Navbar con sfondo pieno per evitare trasparenza */
      .navbar { background-color: #fff; }

      /* LOGO */
      .logo-mark{
        display:inline-flex;
        align-items:flex-end;
        gap:.3rem;
        margin-left:25px;
        /* scala globale del logo: aumenta/diminuisci qui */
        --logo-size: 38px;
        font-size: var(--logo-size);
        color:#000;
      }
      .logo-F{
        font-family: "Inria Serif", serif;
        font-weight: 700;
        /* F alta ~ due righe */
        font-size: 2.5em;
        line-height: .85;
        margin-right:.05rem;
      }
      .logo-stack{
        display:flex;
        flex-direction:column;
        line-height:1;
		margin-left: -5px;
      }
      .logo-line{
        font-family: "Inria Serif", serif;
        font-size:1em;
        line-height:1;
        letter-spacing: .005em; /* micro aggiustamento */
      }
	  .nav-link{
		  font-size: 20px;
	  }

    /* Page entry fade from bottom */
    body.page-animate {
    opacity: 0;
    transform: translateY(22px);
    transition: none;
    }

    body.page-animate.page-animate--visible {
    animation: fadeInUp 720ms ease-out forwards;
    }

    @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(22px); }
    to { opacity: 1; transform: translateY(0); }
    }

    @media (prefers-reduced-motion: reduce) {
    body.page-animate { opacity: 1; transform: none; }
    body.page-animate.page-animate--visible { animation: none; }
    }

      @media(max-width:980px){ .player-wrap video,.player-wrap img{height:280px} .thumbs{grid-template-columns:repeat(3,1fr)} }
      @media(max-width:520px){ .thumbs{grid-template-columns:repeat(2,1fr)} }
    </style>
  </head>
  <body class="page-animate">
		<!-- Navbar -->
		<nav class="navbar navbar-expand-md sticky-top shadow-sm bg-body">
			<div class="container">
				<a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
					<span class="logo-mark logo-theme-iceNavy">
						<span class="logo-color logo-F">F</span>
						<span class="logo-stack">
							<span class="logo-color logo-line">aber</span>
							<span class="logo-color logo-line">reelance</span>
						</span>
					</span>
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="mainNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item hvr-grow"><a class="nav-link" href="about.html">About</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="showreel.html">Showreel</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="lavori.html">Lavori</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="contatti.html">Contatti</a></li>
					</ul>
				</div>
			</div>
		</nav>

    <main>
      <div class="container-hero">
        <div>
          <a class="text-muted" href="showreel.html">← Torna agli showreel</a>
          <h1 id="title" class="title">Titolo</h1>
          <div id="subtitle" class="sub">anno — categorie</div>

          <div class="player-wrap mt-3" id="playerAnchor">
            <!-- video or image inserted here (centered) -->
          </div>

          <div class="description">
            <div id="description"></div>
          </div>
        </div>
      </div>
    </main>

		<!-- Footer -->
		<footer class="py-4 mt-5">
			<div class="container d-flex flex-column flex-sm-row align-items-center justify-content-between gap-3">
				<div class="small">
					© <span id="year"></span> Fabrizio Arrigo • Tutti i diritti riservati
				</div>
				<div class="d-flex gap-3 small">
					<a href="https://www.linkedin.com/in/fabrizio-faber-arrigo-a1b77a22b" target="_blank" class="text-decoration-none"><i class="bi bi-linkedin"></i></a>
					<a href="https://www.instagram.com/faber.arrigo" target="_blank" class="text-decoration-none"><i class="bi bi-instagram"></i></a>
				</div>
			</div>
		</footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    document.addEventListener('DOMContentLoaded', () => {
      document.body.classList.add('page-animate--visible');
    });
  </script>
  <script>
      // URL helpers
      function readSlug(){ const p=new URLSearchParams(window.location.search); return p.get('slug') || ''; }

      // data loader: try JSON fetch then fallback to JS global for file://
      async function loadDetails(){
        try{ const r = await fetch('data/showreel-details.json', {cache:'no-store'}); if(r.ok) return await r.json(); }catch(e){}
  try{ await new Promise((res,rej)=>{ const s=document.createElement('script'); s.src='data/showreel-data.js'; s.onload=res; s.onerror=rej; document.head.appendChild(s); }); return window.SHOWREEL_DETAILS || []; }catch(e){ return []; }
      }

      // lightbox
  // gallery/lightbox removed — no handlers needed

      function renderItem(item){
        if(!item){ document.querySelector('main').innerHTML = '<div class="container text-center py-5"><p class="lead">Elemento non trovato.</p><p><a class="text-muted" href="showreel.html">← Torna allo showreel</a></p></div>'; return; }

        document.getElementById('title').textContent = item.title || '';
        document.getElementById('subtitle').textContent = [item.year, (item.categories||[]).join(' • ')].filter(Boolean).join(' — ');
        document.getElementById('description').innerHTML = item.description || '';

  // player (centered)
  const anchor = document.getElementById('playerAnchor'); anchor.innerHTML = '';
  if(item.video && item.video.length){ const wrapper = document.createElement('div'); wrapper.style.maxWidth='980px'; wrapper.style.margin='0 auto'; const v = document.createElement('video'); v.controls=true; v.playsInline=true; v.muted=false; v.style.width='100%'; v.style.height='100%'; const s = document.createElement('source'); s.src = item.video[0]; s.type='video/mp4'; v.appendChild(s); wrapper.appendChild(v); anchor.appendChild(wrapper); }
  else { const wrapper = document.createElement('div'); wrapper.style.maxWidth='980px'; wrapper.style.margin='0 auto'; const img = document.createElement('img'); img.alt = item.title||''; img.src = item.poster || 'data:image/svg+xml;utf8,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900"><rect width="100%" height="100%" fill="#f8fafc"/><text x="50%" y="50%" fill="#64748b" font-family="Arial" font-size="36" text-anchor="middle">Video non disponibile</text></svg>'); wrapper.appendChild(img); anchor.appendChild(wrapper); }
      }

      (async ()=>{ const slug = readSlug(); const data = await loadDetails(); const item = (data||[]).find(d=>d.slug===slug||String(d.id)===slug); renderItem(item); })();
    </script>
  </body>
</html>
