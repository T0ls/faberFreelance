<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lavori • Fabrizio Arrigo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover.css"/>

		<link href="https://fonts.googleapis.com/css2?family=Inria+Serif:wght@400;700&display=swap" rel="stylesheet">

		<style>
      @font-face{
        font-family: "Obra Letra";
        src: local("Obra Letra")
             /* , url("/fonts/ObraLetra.woff2") format("woff2"),
                url("/fonts/ObraLetra.woff") format("woff") */;
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      /* Navbar con sfondo pieno per evitare trasparenza */
      .navbar { background-color: #fff; }

      /* LOGO */
      .logo-mark{
        display:inline-flex;
        align-items:flex-end;
        gap:.3rem;
        margin-left:25px;
        /* scala globale del logo: aumenta/diminuisci qui */
        --logo-size: 38px;
        font-size: var(--logo-size);
        color:#000;
      }
      .logo-F{
        font-family: "Inria Serif", serif;
        font-weight: 700;
        /* F alta ~ due righe */
        font-size: 2.5em;
        line-height: .85;
        margin-right:.05rem;
      }
      .logo-stack{
        display:flex;
        flex-direction:column;
        line-height:1;
		margin-left: -5px;
      }
      .logo-line{
        font-family: "Inria Serif", serif;
        font-size:1em;
        line-height:1;
        letter-spacing: .005em; /* micro aggiustamento */
      }
	  .nav-link{
		  font-size: 20px;
	  }

	  .page-hero{padding:3.5rem 0;}
        /* Lavori page: showreel-inspired cards but distinct styling */
        .filters {
          display:flex;
          gap:.5rem;
          justify-content:center;
          margin-bottom:1rem;
          flex-wrap:wrap;
          padding:.25rem 0;
        }
        .tag { font-size:.82rem; padding:.26rem .7rem; border-radius:999px; border:1px solid #eef2f7; background:#fff; white-space:nowrap; flex:0 0 auto; }

        /* Selected filter appearance */
        .filters .tag{ transition: all .16s ease; }
        .filters .tag[aria-pressed="true"], .filters .tag.btn-primary{
          background: #0b5fff; /* primary */
          color: #fff;
          border-color: transparent;
          box-shadow: 0 8px 24px rgba(11,95,255,0.12);
          transform: translateY(-2px) scale(1.02);
        }
        .filters .tag:focus{ outline: 2px solid rgba(11,95,255,0.12); outline-offset:2px; }

        @media (max-width:520px){
          .filters{ justify-content:center; overflow-x:auto; -webkit-overflow-scrolling:touch; padding:0 .5rem; }
          .filters::-webkit-scrollbar{ height:6px; }
          .filters::-webkit-scrollbar-thumb{ background: rgba(0,0,0,0.06); border-radius:3px; }
        }

  /* grid: centered flow but tighter columns and cinematic cards */
  .gallery-wrap{ display:flex; flex-wrap:wrap; justify-content:center; gap:1.25rem; padding:2rem 0; }
  /* desktop: 3 columns, tablet: 2, mobile: 1 */
  .gallery-wrap .proj{ flex: 0 0 calc(33.333% - 0.833rem); max-width:420px; }
  @media (max-width:991px){ .gallery-wrap .proj{ flex:0 0 calc(50% - 0.625rem); } }
  @media (max-width:767px){ .gallery-wrap .proj{ flex:0 0 100%; max-width:100%; } }

  /* Minimal, clean card surface */
  .proj{ background:transparent; border-radius:10px; border:1px solid rgba(15,23,42,0.06); overflow:hidden; display:flex; flex-direction:column; min-height:220px; transition: transform .22s ease, box-shadow .22s ease; }
  .proj:hover{ transform: translateY(-4px); box-shadow: 0 14px 32px rgba(2,6,23,0.06); }

  /* Image area: simple, full-bleed */
  .proj .thumb{ display:block; width:100%; aspect-ratio:16/9; overflow:hidden; position:relative; }
  .proj .thumb img{ width:100%; height:100%; display:block; object-fit:cover; transition: transform .36s ease; }
  .proj:hover .thumb img{ transform: scale(1.03); }

  /* minimal overlay: small translucent white chip for light look */
  .overlay-label{ position:absolute; left:10px; bottom:10px; background: rgba(255,255,255,0.9); color:#0f172a; padding:.28rem .5rem; border-radius:6px; font-size:.88rem; display:inline-flex; gap:.4rem; align-items:center; box-shadow: 0 2px 8px rgba(2,6,23,0.04); }
  .overlay-label strong{ font-weight:600; font-size:.92rem; }

  /* meta body simplified */
  .card-body{ padding:.9rem 1rem; display:flex; flex-direction:column; gap:.35rem; justify-content:space-between; flex:1 1 auto; }
  .card-title{ font-size:1rem; margin:0; font-weight:600; color:#0b1220; }
  .card-text{ color:#6b7280; font-size:.9rem; margin:0; }
  .card-actions{ margin-top:.45rem; }
  .project-link{ color: #0b5fff; text-decoration: none; font-size:.92rem; font-weight:600; }
  .project-link:hover{ text-decoration:underline; }

  /* subtle entrance */
  .proj{ opacity:0; transform: translateY(6px); }
  .proj.show{ opacity:1; transform:none; transition: opacity .36s ease, transform .36s cubic-bezier(.2,.9,.3,1); }

      </style>
  </head>
  <body>
		<!-- Navbar -->
		<nav class="navbar navbar-expand-md sticky-top shadow-sm bg-body">
			<div class="container">
				<a class="navbar-brand d-flex align-items-center gap-2" href="homepage.html">
					<span class="logo-mark logo-theme-iceNavy">
						<span class="logo-color logo-F">F</span>
						<span class="logo-stack">
							<span class="logo-color logo-line">aber</span>
							<span class="logo-color logo-line">reelance</span>
						</span>
					</span>
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="mainNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item hvr-grow"><a class="nav-link" href="about.html">About</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="showreel.html">Showreel</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="lavori.html">Lavori</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="contatti.html">Contatti</a></li>
					</ul>
				</div>
			</div>
		</nav>

    <header class="page-hero text-center bg-light pb-2">
      <div class="container">
        <h1 class="display-6">LAVORI</h1>
        <p class="lead">Portfolio — selezione dei progetti recenti. Un racconto visivo per ogni lavoro: immagini, ritmo e scelte di montaggio.</p>
  <div class="filters pt-2" role="toolbar" aria-label="Filtri progetti">
          <button class="btn btn-outline-secondary btn-sm tag" data-filter="all">Tutti</button>
          <button class="btn btn-outline-secondary btn-sm tag" data-filter="commercial">Commercial</button>
          <button class="btn btn-outline-secondary btn-sm tag" data-filter="music">Music</button>
          <button class="btn btn-outline-secondary btn-sm tag" data-filter="short">Short film</button>
          <button class="btn btn-outline-secondary btn-sm tag" data-filter="experimental">Experimental</button>
        </div>
      </div>
    </header>

    <main class="py-5">
      <div class="container">
        <div class="gallery-wrap" id="projectsContainer" aria-hidden="false">
          <!-- project cards will be rendered from data/projects-data.js -->
          <div id="noMatches" class="no-matches" style="display:none">Nessun risultato per il filtro selezionato.</div>
        </div>
      </div>
    </main>

    <footer class="py-4 mt-5">
      <div class="container d-flex flex-column flex-sm-row align-items-center justify-content-between gap-3">
        <div class="small">© <span id="year"></span> Fabrizio Arrigo • Tutti i diritti riservati</div>
        <div class="d-flex gap-3 small">
          <a href="https://www.linkedin.com/in/fabrizio-faber-arrigo-a1b77a22b" target="_blank" class="text-decoration-none"><i class="bi bi-linkedin"></i></a>
          <a href="https://www.instagram.com/faber.arrigo" target="_blank" class="text-decoration-none"><i class="bi bi-instagram"></i></a>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>document.getElementById('year').textContent = new Date().getFullYear();</script>

    <!-- load projects data (global) -->
    <script src="data/projects-data.js"></script>

    <script>
  // data-driven client-side multi-select filtering for lavori
  window.addEventListener('load', function(){
    const filters = Array.from(document.querySelectorAll('.filters [data-filter]'));
    const container = document.getElementById('projectsContainer');
    let projects = Array.from(document.querySelectorAll('.proj'));

    // active filters (excluding 'all')
    const active = new Set();

    // if no static projects exist, render from data/projects-data.js (window.PROJECTS)
    if((!projects || !projects.length) && window.PROJECTS && Array.isArray(window.PROJECTS)){
      (window.PROJECTS||[]).forEach((p, i)=>{
        const art = document.createElement('article');
        art.className = 'proj';
        // set categories on the element for client-side filtering
        art.dataset.cats = (p.categories||[]).join(' ').toLowerCase();

        const a = document.createElement('a');
        a.className = 'thumb';
        a.href = "project-item.html?slug=" + p.slug || '#';

        const img = document.createElement('img');
        img.src = p.thumb || '';
        img.alt = p.title || '';
        a.appendChild(img);

        const label = document.createElement('div');
        label.className = 'overlay-label';
        label.innerHTML = `<strong>${p.title}</strong><span> • ${p.year || ''}</span>`;
        a.appendChild(label);

        art.appendChild(a);

        const body = document.createElement('div');
        body.className = 'card-body';
        body.innerHTML = `
          <div>
            <div class="card-title">${p.title}</div>
            <p class="card-text">${p.description_short || p.description || ''}</p>
          </div>
          <div class="card-actions">
            <a class="project-link" href="${"project-item.html?slug=" + p.slug || '#'}">Apri progetto →</a>
          </div>`;
        art.appendChild(body);

        container.insertBefore(art, document.getElementById('noMatches'));
      });
      // re-query projects
      projects = Array.from(document.querySelectorAll('.proj'));
    }

    // apply filtering: show items that match ANY selected filter (OR). If no filters selected -> show all
    function applyFilters(){
      const selected = Array.from(active);
      let visible = 0;
      projects.forEach((p, i)=>{
        const cats = (p.dataset.cats||'').toLowerCase().split(/\s+/).map(s=>s.trim()).filter(Boolean);
        const match = selected.length === 0 || selected.some(f => cats.includes(f));
        if(match){
          p.style.display = '';
          setTimeout(()=> p.classList.add('show'), 40 + i*30);
          visible++;
        } else {
          p.classList.remove('show');
          setTimeout(()=> p.style.display = 'none', 240);
        }
      });
      const nm = document.getElementById('noMatches');
      if(nm){ nm.style.display = visible? 'none':'block'; }
    }

    // update visual state of filter buttons according to `active` Set
    function updateFilterUI(){
      filters.forEach(btn=>{
        const f = btn.dataset.filter;
        if(f === 'all'){
          if(active.size === 0){ btn.classList.add('btn-primary'); btn.setAttribute('aria-pressed','true'); }
          else { btn.classList.remove('btn-primary'); btn.setAttribute('aria-pressed','false'); }
          // remove any close icon on 'all'
          const existing = btn.querySelector('.close-x'); if(existing) existing.remove();
        } else {
          if(active.has(f)){
            btn.classList.add('btn-primary'); btn.setAttribute('aria-pressed','true');
            // ensure a close '×' exists inside the tag
            if(!btn.querySelector('.close-x')){
              const close = document.createElement('span');
              close.className = 'close-x';
              close.innerHTML = '&times;';
              close.title = 'Rimuovi filtro ' + f;
              close.style.marginLeft = '.45rem';
              close.style.cursor = 'pointer';
              close.style.fontWeight = '700';
              close.addEventListener('click', (ev)=>{
                ev.stopPropagation();
                active.delete(f);
                updateFilterUI();
                applyFilters();
              });
              btn.appendChild(close);
            }
          } else {
            btn.classList.remove('btn-primary'); btn.setAttribute('aria-pressed','false');
            const existing = btn.querySelector('.close-x'); if(existing) existing.remove();
          }
        }
      });
    }

    // attach click handlers to filter buttons (toggle behavior)
    filters.forEach(b=> b.addEventListener('click', ()=>{
      const f = b.dataset.filter;
      if(f === 'all'){
        // clear all other filters
        active.clear();
      } else {
        if(active.has(f)) active.delete(f); else active.add(f);
      }
      updateFilterUI();
      applyFilters();
    }));

    // init: no filters selected => 'Tutti' active
    updateFilterUI();
    applyFilters();

    // center filter scroll when overflowing
    function centerFiltersScroll(){
      const f = document.querySelector('.filters'); if(!f) return;
      if(f.scrollWidth > f.clientWidth){ try{ f.scrollLeft = Math.round((f.scrollWidth - f.clientWidth)/2); }catch(e){} }
    }
    centerFiltersScroll(); let _t;
    window.addEventListener('resize', ()=>{ clearTimeout(_t); _t = setTimeout(centerFiltersScroll, 140); });
  });
  </script>
  </body>
</html>
