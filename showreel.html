<!doctype html>
<html lang="it">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Showreel • Fabrizio Arrigo</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.3.1/css/hover.css"/>

		<link href="https://fonts.googleapis.com/css2?family=Inria+Serif:wght@400;700&display=swap" rel="stylesheet">

		<style>
      @font-face{
        font-family: "Obra Letra";
        src: local("Obra Letra")
             /* , url("/fonts/ObraLetra.woff2") format("woff2"),
                url("/fonts/ObraLetra.woff") format("woff") */;
        font-weight: 400;
        font-style: normal;
        font-display: swap;
      }

      /* Navbar con sfondo pieno per evitare trasparenza */
      .navbar { background-color: #fff; }

      /* LOGO */
      .logo-mark{
        display:inline-flex;
        align-items:flex-end;
        gap:.3rem;
        margin-left:25px;
        /* scala globale del logo: aumenta/diminuisci qui */
        --logo-size: 38px;
        font-size: var(--logo-size);
        color:#000;
      }
      .logo-F{
        font-family: "Inria Serif", serif;
        font-weight: 700;
        /* F alta ~ due righe */
        font-size: 2.5em;
        line-height: .85;
        margin-right:.05rem;
      }
      .logo-stack{
        display:flex;
        flex-direction:column;
        line-height:1;
		margin-left: -5px;
      }
      .logo-line{
        font-family: "Inria Serif", serif;
        font-size:1em;
        line-height:1;
        letter-spacing: .005em; /* micro aggiustamento */
      }
	  .nav-link{
		  font-size: 20px;
	  }

	  .page-hero{padding:3.5rem 0;}

			/* Conceptual styles for showreel page */
			.hero-concept {
				max-width: 900px;
				margin: 0 auto 1rem auto;
				color: #0f172a;
			}
			.hero-concept h2{
				font-family: 'Inria Serif', serif;
				font-size: 1.75rem;
				letter-spacing: .02em;
			}


			.card-thumb { position:relative; overflow:hidden; }
			.play-overlay{
				position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none;
			}


			/* curvy, minimal play button (pill + rounded triangle SVG) */
			.play-btn{
				width:56px; height:36px; border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,0.95); font-size:0; border:1px solid rgba(255,255,255,0.12); box-shadow: 0 8px 30px rgba(2,6,23,0.12); backdrop-filter: blur(6px) saturate(1.02); transition: transform .22s ease, box-shadow .22s ease, background .18s;
			}
			.play-btn svg{ width:18px; height:18px; display:block; }
			.play-btn:hover{ transform: translateY(-3px) scale(1.02); box-shadow: 0 12px 34px rgba(2,6,23,0.18); }

			.concept-blurb{ color:#334155; font-size:0.95rem; margin-bottom:.75rem; }
			.moodboard{ display:flex; gap:.5rem; justify-content:center; margin:1rem 0 2rem 0; flex-wrap:wrap }
			.swatch{ width:42px; height:42px; border-radius:6px; box-shadow:inset 0 -6px 12px rgba(0,0,0,0.06); }

			/* subtle hover on cards */
			.card.h-100{ transition: transform .22s ease, box-shadow .22s ease; }
			.card.h-100:hover{ transform: translateY(-6px); box-shadow: 0 18px 36px rgba(2,6,23,0.12); }

			/* --- Centered, wrapping flex layout: items flow from center and rearrange based on how many are visible --- */
			.carousel-wrap{
				display:flex;
				flex-wrap:wrap;
				justify-content:center; /* center the row(s) */
				gap:1.25rem;
				padding:2rem 0;
				position:relative;
			}
			.carousel-wrap .card{ flex: 0 0 calc(33.333% - 0.833rem); max-width:420px; border-radius:14px; overflow:visible; }

			/* stacked look: offsets and z-index for first three items (only on wide screens) */
			@media (min-width: 992px){
				.carousel-wrap .card:nth-child(1){ transform: translateX(-36px) scale(.96); z-index:3; }
				.carousel-wrap .card:nth-child(2){ transform: translateX(0) scale(1); z-index:4; box-shadow: 0 26px 50px rgba(2,6,23,0.12); }
				.carousel-wrap .card:nth-child(3){ transform: translateX(36px) scale(.94); z-index:2; }
			}

			/* Responsive: 2 columns on tablet, 1 on phone */
			@media (max-width: 991px){
				.carousel-wrap .card{ flex: 0 0 calc(50% - 0.625rem); }
			}
			@media (max-width: 767px){
				.carousel-wrap .card{ flex: 0 0 100%; max-width:100%; transform:none !important; }
			}

			/* overlay label (name + year) - positioned above the video */
			.overlay-label{
				position:absolute; left:12px; bottom:12px; background:none; color:rgba(255,255,255,0.95); padding:0 .2rem; font-size:.95rem; display:inline-flex; gap:.5rem; align-items:center; transition: transform .22s ease, color .18s ease, opacity .18s ease, text-shadow .18s ease; pointer-events:none;
				text-shadow: 0 4px 18px rgba(0,0,0,0.65);
			}
			.overlay-label strong{ font-weight:700; font-size:0.95rem; }
			.overlay-label span{ opacity:0.85; font-size:0.85rem; }

			/* entrance animations */
			@keyframes fadeUp { from{opacity:0; transform:translateY(18px) scale(.985)} to{opacity:1; transform:none} }
			.card.h-100{ opacity:0; transform-origin:center; }
			.card.h-100.animated{ animation: fadeUp .7s cubic-bezier(.2,.9,.3,1) forwards; }
			.card.h-100.animated.delay-1{ animation-delay: .06s; }
			.card.h-100.animated.delay-2{ animation-delay: .18s; }
			.card.h-100.animated.delay-3{ animation-delay: .3s; }

			/* play button subtle float */
			@keyframes floatPulse { 0%{ transform:translateY(0) } 50%{ transform:translateY(-3px) } 100%{ transform:translateY(0) } }
			.play-btn{ animation: floatPulse 3.6s cubic-bezier(.2,.8,.2,1) infinite; }

			/* overlay label entrance */
			@keyframes labelIn { from{ opacity:0; transform: translateY(8px) } to{ opacity:1; transform:none } }
			.overlay-label{ opacity:0; transform:translateY(8px); }
			.overlay-label.show{ animation: labelIn .5s ease-out forwards; }
			/* highlight on hover */
			.card.h-100.hovered .overlay-label{ background:none; color:#fff; transform: translateY(-6px) scale(1.03); text-shadow: 0 10px 30px rgba(0,0,0,0.75); }

			/* video styling */
			.card-video{ width:100%; height:auto; display:block; object-fit:cover; transition: transform .28s ease, opacity .28s ease, filter .28s ease; }
			/* poster fallback styled like video */
			.card-poster{ width:100%; height:100%; display:block; object-fit:cover; }
			.card.h-100.hovered .card-video{ transform: scale(1.03); filter: blur(4px) brightness(.82) contrast(.95); }

			/* visual polish: rim, vignette and subtle glass */
			.card-thumb{ border-radius:12px; overflow:hidden; position:relative; }
			.card-thumb::before{ content:""; position:absolute; inset:0; pointer-events:none; border-radius:12px; box-shadow: inset 0 -24px 60px rgba(0,0,0,0.18); mix-blend-mode:multiply; opacity:.12; }
			.card-thumb::after{ content:""; position:absolute; inset:0; pointer-events:none; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.06)); mix-blend-mode: overlay; }

			/* 3D feel on container */
			.carousel-wrap{ perspective:1200px; }
			.carousel-wrap .card{ transform-style:preserve-3d; backface-visibility:hidden; }

			/* hide animation for filtering */
			@keyframes hideDown { from{ opacity:1; transform:none } to{ opacity:0; transform: translateY(18px) scale(.96) } }
			.is-hidden{ animation: hideDown .28s ease forwards; pointer-events:none; transform-origin:center; }
			.is-hidden .card-video{ opacity:.2; }

			/* no-results message */
			.no-matches{ display:none; width:100%; text-align:center; color:#64748b; padding:1.25rem 0; font-style:italic; }

			/* when visible again, re-trigger entrance */
			.is-visible{ opacity:1 !important; transform:none !important; }

			/* moodboard micro animation */
			.swatch{ animation: swatchPop .9s ease both; }
			.swatch:nth-child(1){ animation-delay:.15s }
			.swatch:nth-child(2){ animation-delay:.28s }
			.swatch:nth-child(3){ animation-delay:.4s }
			.swatch:nth-child(4){ animation-delay:.52s }
			.swatch:nth-child(5){ animation-delay:.64s }
			@keyframes swatchPop { from{ opacity:0; transform:scale(.6) } to { opacity:1; transform:none } }

			/* Page entry fade from bottom */
			body.page-animate {
				opacity: 0;
				transform: translateY(22px);
				transition: none;
			}

			body.page-animate.page-animate--visible {
				animation: fadeInUp 720ms ease-out forwards;
			}

			@keyframes fadeInUp {
				from { opacity: 0; transform: translateY(22px); }
				to { opacity: 1; transform: translateY(0); }
			}

			@media (prefers-reduced-motion: reduce) {
				body.page-animate { opacity: 1; transform: none; }
				body.page-animate.page-animate--visible { animation: none; }
			}
		</style>
	</head>
	<body class="page-animate">
		<!-- Navbar -->
		<nav class="navbar navbar-expand-md sticky-top shadow-sm bg-body">
			<div class="container">
				<a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
					<span class="logo-mark logo-theme-iceNavy">
						<span class="logo-color logo-F">F</span>
						<span class="logo-stack">
							<span class="logo-color logo-line">aber</span>
							<span class="logo-color logo-line">reelance</span>
						</span>
					</span>
				</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="mainNav">
					<ul class="navbar-nav ms-auto">
						<li class="nav-item hvr-grow"><a class="nav-link" href="about.html">About</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="showreel.html">Showreel</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="lavori.html">Lavori</a></li>
						<li class="nav-item hvr-grow"><a class="nav-link" href="contatti.html">Contatti</a></li>
					</ul>
				</div>
			</div>
		</nav>

		<header class="page-hero text-center bg-light">
			<div class="container">
				<div class="hero-concept">
					<h1 class="display-6">SHOWREEL</h1>
					<h2>Progetti come esperimenti di linguaggio visivo</h2>
					<p class="lead concept-blurb">Questa raccolta mette a fuoco tono, ritmo e scelta di immagini — non solo 'reel' ma sequenze pensate per esplorare narrazione e atmosfera. Ogni montaggio nasce da un'idea che guida scelte stilistiche e ritmo.</p>
				</div>

			</div>
		</header>

		<main class="py-5">
			<div class="container">
				<div class="carousel-wrap" id="cardsContainer" aria-hidden="false">
					<!-- cards are generated from data/showreels.json -->
				</div>
			</div>
		</main>

		<footer class="py-4 mt-5">
			<div class="container d-flex flex-column flex-sm-row align-items-center justify-content-between gap-3">
				<div class="small">© <span id="year"></span> Fabrizio Arrigo • Tutti i diritti riservati</div>
				<div class="d-flex gap-3 small">
					<a href="https://www.linkedin.com/in/fabrizio-faber-arrigo-a1b77a22b" target="_blank" class="text-decoration-none"><i class="bi bi-linkedin"></i></a>
					<a href="https://www.instagram.com/faber.arrigo" target="_blank" class="text-decoration-none"><i class="bi bi-instagram"></i></a>
				</div>
			</div>
		</footer>

			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

			<!-- unified data as JS global to avoid fetch (works on file://) -->
			<script src="data/showreel-data.js"></script>
		<script>
		// set footer year & trigger page animation
		document.getElementById('year').textContent = new Date().getFullYear();
		document.addEventListener('DOMContentLoaded', () => {
			document.body.classList.add('page-animate--visible');
		});

		// Build cards dynamically from JSON and wire interactions
		window.addEventListener('load', async function(){
			const container = document.getElementById('cardsContainer');



			// read data from global set in data/showreels.js
			try{
				const items = window.SHOWREELS || [];
				if(!items || !items.length) throw new Error('No showreels data available');

				// create cards
				items.forEach((item, i)=>{
					const a = document.createElement('a');
					a.className = `card h-100 animated delay-${(i%3)+1}`;
				    a.href = `showreel-item.html?slug=${encodeURIComponent(item.slug)}`;

					const thumb = document.createElement('div');
					thumb.className = 'card-thumb';
					thumb.style.position = 'relative';

					// Prefer a lightweight preview clip for index cards.
					// IMPORTANT: do NOT fall back to the full 'video' file when preview is missing or empty.
					// If preview is absent or empty, show the poster/fallback image instead.
					const videoCandidates = (Array.isArray(item.preview) && item.preview.length) ? item.preview.slice() : [];

					// inline SVG fallback (lightweight, works on file://)
					// place the message near the bottom-left so the centered play button does not cover it
					const notFoundPoster = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900"><rect width="100%" height="100%" fill="#f8fafc"/><text x="6%" y="86%" fill="#64748b" font-family="Arial, Helvetica, sans-serif" font-size="36" text-anchor="start">Video non disponibile</text></svg>');

					// If there are no video candidates, render a poster <img> so the card visually matches video cards
					let mediaEl;
					if(!videoCandidates.length){
						const img = document.createElement('img');
						img.className = 'card-video card-poster';
						img.alt = item.title || 'poster';
						// use generic inline fallback image (do not use item.poster)
						img.src = notFoundPoster;
						mediaEl = img;
					} else {
						const video = document.createElement('video');
						video.className = 'card-video';
						video.muted = true;
						video.setAttribute('playsinline', '');
						video.autoplay = true; /* attempt autoplay (muted) */
						video.preload = 'auto';
						video.loop = true;

						const src = document.createElement('source');
						video.appendChild(src);

						(function attachVideo(cands){
							if(!cands || !cands.length){
								try{ video.removeChild(src); }catch(e){}
								return;
							}
							src.src = cands[0];
							src.type = 'video/mp4';

							const onErr = function(){
								src.onerror = null;
								video.removeEventListener('error', onErr);
								cands.shift();
								if(cands.length) attachVideo(cands);
									else {
										try{ video.removeChild(src); }catch(e){}
									}
							};

							src.onerror = onErr;
							video.addEventListener('error', onErr);
							try{ video.load(); }catch(e){}
						})(videoCandidates.slice());

						mediaEl = video;
					}

					const overlay = document.createElement('div');
					overlay.className = 'play-overlay';
					overlay.innerHTML = `
<div class="play-btn" aria-hidden="true">
	<svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" role="img">
		<path d="M8 5v14l11-7z" fill="#fff" fill-opacity="0.96" stroke="#fff" stroke-opacity="0.06" stroke-linejoin="round" stroke-linecap="round"/>
	</svg>
</div>`;

					const label = document.createElement('div');
					label.className = 'overlay-label';
					label.innerHTML = `<strong>${item.title}</strong> <span>${item.year}</span>`;

					// if the media element is an image (no video available), mark the thumb so CSS can reposition the play button
					thumb.appendChild(mediaEl);
					thumb.appendChild(overlay);
					thumb.appendChild(label);
					a.appendChild(thumb);
					container.appendChild(a);
					// try to start playback immediately for autoplay-capable browsers (only for video elements)
					if(mediaEl && mediaEl.tagName && mediaEl.tagName.toLowerCase() === 'video'){
						try{ mediaEl.play(); }catch(e){}
					}
				});

				// reveal labels after entrance
				setTimeout(()=>{
					document.querySelectorAll('.overlay-label').forEach(el=> el.classList.add('show'));
				}, 420);



				// hover play behavior
				document.querySelectorAll('.card.h-100').forEach(card=>{
					const mediaEl = card.querySelector('.card-video');
					const label = card.querySelector('.overlay-label');
					if(!mediaEl) return;

					card.addEventListener('mouseenter', async ()=>{
						card.classList.add('hovered');
						if(label) label.classList.add('show');
						// only attempt play for actual <video> elements
						if(mediaEl.tagName && mediaEl.tagName.toLowerCase() === 'video'){
							try { await mediaEl.play(); } catch(e){}
						}
					});

					card.addEventListener('mouseleave', ()=>{
						// keep the videos playing continuously; only remove visual hover state
						card.classList.remove('hovered');
					});

					// clicking the card will navigate to detail (anchor href)
				});

			}catch(err){
				container.innerHTML = '<p class="lead text-center">Errore nel caricamento dei contenuti.</p>';
				console.error(err);
			}
		});
		</script>
	</body>
</html>
